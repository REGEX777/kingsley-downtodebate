<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Applications - Admin Dashboard</title>
    <link rel="stylesheet" href="/css/output.css">
    <script src="https://kit.fontawesome.com/82eb69e53c.js" crossorigin="anonymous"></script>
</head>

<body class="bg-black text-white font-sans antialiased">

    <%- include('../partials/alerts') -%>

    <div class="min-h-screen flex flex-col md:flex-row">

        <%- include('_sidebar') -%>
        <main class="flex-1 p-8 flex flex-col items-center justify-start gap-5">
            <div class="flex items-start justify-start flex-col w-full gap-5">
                <div class="w-full flex items-center justify-between">
                    <p class="text-xl font-medium">Applications <% if(archivePage){ %> - Archives <% } %></p> 
                    <% if(archivePage){ %>
                        <a href="/admin/applications" class="py-2 px-4 rounded-lg bg-green-500">Applications</a>
                    <% }else{ %> 
                        <a href="/admin/applications/archive" class="py-2 px-4 rounded-lg bg-gray-500">Archives</a>
                    <% } %>
                </div>
                <div class="w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5">
                    <% applications.forEach(application => { %> 
                        <div class="w-full bg-[#101828] rounded-lg p-5 flex flex-col gap-4 relative">
                            <div
                                class="py-3 px-5 bg-black rounded-lg text-white font-mono flex flex-row items-center justify-between">
                                <p><%= application.email %></p>
                                <p><i class="fa-solid fa-copy"></i></p>
                            </div>
                            <div
                                class="py-3 px-5 bg-black rounded-lg text-white font-mono flex flex-row items-center justify-between">
                                <p><%= application.message %></p>
                            </div>
                            <div class="flex flex-row items-center w-full justify-start gap-2">

                                <form action="/admin/applications/delete" method="post" onsubmit="return confirm(`Are you sure you want to delete this application? This action cannot be reversed.`)">
                                    <input type="text" name="id" hidden value="<%= application._id %>">
                                    <button type="submit" class="p-3 bg-red-500 hover:bg-red-700 transform cursor-pointer transition-all duration-75 rounded-lg"><i class="fa-solid fa-trash "></i></button>
                                </form>
                                

                                <% if(application.archived){ %> 
                                    <form action="/admin/applications/unarchive" method="post" onsubmit="return confirm(`Are you sure you want to unarchive this application?`)">
                                        <input type="text" name="id" hidden value="<%= application._id %>">
                                        <button type="submit" class="p-3 bg-blue-500 hover:bg-blue-700 transform cursor-pointer transition-all duration-75 rounded-lg"><i class="fa-solid fa-box-archive"></i> Unarchive</button>
                                    </form>
                                <% }else{ %> 
                                    <form action="/admin/applications/archive" method="post" onsubmit="return confirm(`Are you sure you want to archive this application?`)">
                                        <input type="text" name="id" hidden value="<%= application._id %>">
                                        <button type="submit" class="p-3 bg-blue-500 hover:bg-blue-700 transform cursor-pointer transition-all duration-75 rounded-lg"><i class="fa-solid fa-box-archive"></i></button>
                                    </form>
                                <% } %>
                            </div>

                        </div>
                    <% }) %>
                </div>
                    <% if(applications.length === 0){ %> 
                        <div class="flex items-center justify-center w-full">
                            <p class="text-gray-700">Nothing To See Here Yet!</p>
                        </div>
                    <% } %>
            </div>
        </main>
    </div>
</body>
</html>